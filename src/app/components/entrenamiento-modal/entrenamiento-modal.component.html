<div class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50" (click)="closeModal()">
  
  <!-- Modal Principal -->
  <div class="modal-container bg-white shadow-lg rounded-2xl overflow-hidden"
       [ngClass]="{'modal-lg': isDesktop, 'modal-sm': !isDesktop}"
       (click)="$event.stopPropagation()">

    <!-- Header -->
    <div class="modal-header flex justify-between items-center p-4">
      <h2 class="text-lg font-semibold text-gray-800">
        {{ modoEdicion ? 'Editar Entrenamiento' : 'Crear Entrenamiento' }}
      </h2>
      <button class="close-btn text-2xl font-bold" (click)="closeModal()">×</button>
    </div>

    <!-- Contenido del Modal -->
    <div class="modal-body p-6 overflow-y-auto">
      <form [formGroup]="entrenamientoForm" class="space-y-4">
        
        <!-- Nombre -->
        <div>
          <label class="text-gray-700 font-semibold">Nombre del Entrenamiento</label>
          <input type="text" formControlName="nombre" class="input-field"/>
        </div>

        <!-- Descripción -->
        <div>
          <label class="text-gray-700 font-semibold">Descripción</label>
          <textarea formControlName="descripcion" class="input-field h-24"></textarea>
        </div>

        <!-- Fecha de Caducidad -->
        <div>
          <label class="text-gray-700 font-semibold">Fecha de Caducidad</label>
          <input type="date" formControlName="fechaCaducidad" class="input-field"/>
        </div>

        <!-- Capacidad Máxima -->
        <div>
          <label class="text-gray-700 font-semibold">Capacidad Máxima</label>
          <input type="number" formControlName="capacidadMaxima" class="input-field"/>
        </div>

        <!-- Imagen -->
        <div>
          <label class="text-gray-700 font-semibold">Imagen del Entrenamiento</label>
          <div class="image-upload"
               (dragover)="onDragOver($event)" 
               (drop)="onFileDropped($event)">
            <p *ngIf="!imagenVistaPrevia">Arrastra una imagen aquí o haz clic para seleccionar</p>
            <input *ngIf="!imagenVistaPrevia" type="file" class="hidden" (change)="onFileSelected($event)"/>
            <img *ngIf="imagenVistaPrevia" [src]="imagenVistaPrevia" class="preview-image"/>
          </div>
        </div>
      </form>
    </div>

    <!-- Footer con botón -->
    <div class="modal-footer p-4">
      <button class="save-button"
              [ngClass]="{'bg-green-500 hover:bg-green-600': !modoEdicion, 'bg-blue-500 hover:bg-blue-600': modoEdicion}" 
              [disabled]="entrenamientoForm.invalid"
              (click)="guardarEntrenamiento()">
        <ion-icon [name]="modoEdicion ? 'save-outline' : 'add-circle-outline'" class="mr-2"></ion-icon>
        {{ modoEdicion ? 'Actualizar Entrenamiento' : 'Crear Entrenamiento' }}
      </button>
    </div>

  </div>
</div>
